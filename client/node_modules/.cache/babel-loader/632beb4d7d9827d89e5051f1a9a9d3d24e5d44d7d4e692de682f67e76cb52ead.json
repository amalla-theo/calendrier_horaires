{"ast":null,"code":"var _jsxFileName = \"/home/dev1/Bureau/calendrier_horaires/client/src/components/Calendrier.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport CalendrierHebdo from './CalendrierHebdo';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Calendrier = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    serverMessage,\n    error,\n    selectedDate,\n    selectedEmployee,\n    employees,\n    workSchedule,\n    isMobile\n  } = useSelector(state => state);\n  useEffect(() => {\n    // Test de connexion\n    fetch('http://localhost:3001/api/test').then(response => response.json()).then(data => dispatch({\n      type: 'SET_SERVER_MESSAGE',\n      payload: data.message\n    })).catch(err => dispatch({\n      type: 'SET_ERROR',\n      payload: err.message\n    }));\n\n    // Chargement des données employés\n    fetch('http://localhost:3001/api/employees').then(response => response.json()).then(data => dispatch({\n      type: 'SET_EMPLOYEES',\n      payload: data.employees\n    })).catch(err => dispatch({\n      type: 'SET_ERROR',\n      payload: 'Erreur lors du chargement des employés: ' + err.message\n    }));\n\n    // Gestion du redimensionnement pour le responsive\n    const handleResize = () => dispatch({\n      type: 'SET_IS_MOBILE',\n      payload: window.innerWidth < 700\n    });\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [dispatch]);\n  const handleDateSelect = date => {\n    dispatch({\n      type: 'SET_SELECTED_DATE',\n      payload: date\n    });\n  };\n  const handleEmployeeChange = event => {\n    const employeeId = parseInt(event.target.value);\n    dispatch({\n      type: 'SET_SELECTED_EMPLOYEE',\n      payload: employeeId\n    });\n\n    // Trouver l'employé sélectionné et son planning\n    const selectedEmp = employees.find(emp => emp.id === employeeId);\n    if (selectedEmp) {\n      dispatch({\n        type: 'SET_WORK_SCHEDULE',\n        payload: selectedEmp.planning\n      });\n    } else {\n      dispatch({\n        type: 'SET_WORK_SCHEDULE',\n        payload: null\n      });\n    }\n  };\n\n  // ... styles inchangés ...\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.employeeSelector,\n      children: /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedEmployee,\n        onChange: handleEmployeeChange,\n        style: styles.select,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"S\\xE9lectionner un employ\\xE9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), employees.map(employee => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: employee.id,\n          children: employee.name\n        }, employee.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.topBar,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.serverTest,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0,\n            marginBottom: 8,\n            fontSize: '1.08em',\n            color: '#c58940'\n          },\n          children: \"Test de connexion serveur\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), serverMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles.success,\n          children: serverMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 29\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles.error,\n          children: [\"Erreur: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.calendarContainer,\n        children: /*#__PURE__*/_jsxDEV(CalendrierHebdo, {\n          selectedDate: selectedDate,\n          onDateSelect: handleDateSelect,\n          planningTravail: workSchedule,\n          isMobile: isMobile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Calendrier, \"7feaiAQJELUvVNtUAaDWD3MR2uw=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Calendrier;\nexport default Calendrier;\nvar _c;\n$RefreshReg$(_c, \"Calendrier\");","map":{"version":3,"names":["React","useEffect","CalendrierHebdo","useSelector","useDispatch","jsxDEV","_jsxDEV","Calendrier","_s","dispatch","serverMessage","error","selectedDate","selectedEmployee","employees","workSchedule","isMobile","state","fetch","then","response","json","data","type","payload","message","catch","err","handleResize","window","innerWidth","addEventListener","removeEventListener","handleDateSelect","date","handleEmployeeChange","event","employeeId","parseInt","target","value","selectedEmp","find","emp","id","planning","style","styles","page","children","employeeSelector","onChange","select","fileName","_jsxFileName","lineNumber","columnNumber","map","employee","name","topBar","serverTest","marginTop","marginBottom","fontSize","color","success","calendarContainer","onDateSelect","planningTravail","_c","$RefreshReg$"],"sources":["/home/dev1/Bureau/calendrier_horaires/client/src/components/Calendrier.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport CalendrierHebdo from './CalendrierHebdo';\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst Calendrier = () => {\n  const dispatch = useDispatch();\n\n  const {\n    serverMessage,\n    error,\n    selectedDate,\n    selectedEmployee,\n    employees,\n    workSchedule,\n    isMobile\n  } = useSelector(state => state);\n\n  useEffect(() => {\n    // Test de connexion\n    fetch('http://localhost:3001/api/test')\n      .then(response => response.json())\n      .then(data => dispatch({ type: 'SET_SERVER_MESSAGE', payload: data.message }))\n      .catch(err => dispatch({ type: 'SET_ERROR', payload: err.message }));\n\n    // Chargement des données employés\n    fetch('http://localhost:3001/api/employees')\n      .then(response => response.json())\n      .then(data => dispatch({ type: 'SET_EMPLOYEES', payload: data.employees }))\n      .catch(err => dispatch({ type: 'SET_ERROR', payload: 'Erreur lors du chargement des employés: ' + err.message }));\n\n    // Gestion du redimensionnement pour le responsive\n    const handleResize = () => dispatch({ type: 'SET_IS_MOBILE', payload: window.innerWidth < 700 });\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [dispatch]);\n\n  const handleDateSelect = (date) => {\n    dispatch({ type: 'SET_SELECTED_DATE', payload: date });\n  };\n\n  const handleEmployeeChange = (event) => {\n    const employeeId = parseInt(event.target.value);\n    dispatch({ type: 'SET_SELECTED_EMPLOYEE', payload: employeeId });\n\n    // Trouver l'employé sélectionné et son planning\n    const selectedEmp = employees.find(emp => emp.id === employeeId);\n    if (selectedEmp) {\n      dispatch({ type: 'SET_WORK_SCHEDULE', payload: selectedEmp.planning });\n    } else {\n      dispatch({ type: 'SET_WORK_SCHEDULE', payload: null });\n    }\n  };\n\n  // ... styles inchangés ...\n\n  return (\n    <div style={styles.page}>\n      <div style={styles.employeeSelector}>\n        <select\n          value={selectedEmployee}\n          onChange={handleEmployeeChange}\n          style={styles.select}\n        >\n          <option value=\"\">Sélectionner un employé</option>\n          {employees.map(employee => (\n            <option key={employee.id} value={employee.id}>\n              {employee.name}\n            </option>\n          ))}\n        </select>\n      </div>\n      <div style={styles.topBar}>\n        <div style={styles.serverTest}>\n          <h3 style={{ marginTop: 0, marginBottom: 8, fontSize: '1.08em', color: '#c58940' }}>Test de connexion serveur</h3>\n          {serverMessage && <p style={styles.success}>{serverMessage}</p>}\n          {error && <p style={styles.error}>Erreur: {error}</p>}\n        </div>\n        <div style={styles.calendarContainer}>\n          <CalendrierHebdo\n            selectedDate={selectedDate}\n            onDateSelect={handleDateSelect}\n            planningTravail={workSchedule}\n            isMobile={isMobile}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Calendrier;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}